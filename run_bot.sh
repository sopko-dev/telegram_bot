#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫—É Telegram –±–æ—Ç–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ç–æ–∫–µ–Ω–∞

echo "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å..."

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–∫–µ–Ω
if [ -z "$TELEGRAM_BOT_TOKEN" ]; then
    echo "‚ùå –ü–û–ú–ò–õ–ö–ê: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!"
    echo ""
    echo "–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ç–æ–∫–µ–Ω –∫–æ–º–∞–Ω–¥–æ—é:"
    echo '  export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_—Ç—É—Ç"'
    echo ""
    echo "–ê–±–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —Ç–∞–∫:"
    echo '  TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω" ./run_bot.sh'
    echo ""
    exit 1
fi

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É —Ç–æ–∫–µ–Ω–∞ (–º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –¥–≤–æ–∫—Ä–∞–ø–∫—É)
if [[ ! "$TELEGRAM_BOT_TOKEN" =~ : ]]; then
    echo "‚ö†Ô∏è  –£–í–ê–ì–ê: –¢–æ–∫–µ–Ω –≤–∏–≥–ª—è–¥–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –¥–≤–æ–∫—Ä–∞–ø–∫—É)"
    echo "–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
    echo ""
    read -p "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≤—Å–µ –æ–¥–Ω–æ? (y/n) " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

echo "‚úÖ –¢–æ–∫–µ–Ω –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"
echo "üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."
echo ""

# –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ–µ–∫—Ç—É
cd "$(dirname "$0")"

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
cargo run
